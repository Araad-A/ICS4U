const allTeams = [{
    "StandingId":1,
    "RoundId":1,
    "TeamId":514,
    "Name":"Leicester City FC",
    "ShortName":"Leicester City",
    "Scope":"Total",
    "Order":1,
    "Games":38,
    "Wins":23,
    "Losses":3,
    "Draws":0,
    "GoalsScored":0,
    "GoalsAgainst":0,
    "GoalsDifferential":0,
    "Points":58,
    "Group":null,
    "GlobalTeamID":90000514
 },
 {
    "StandingId":3,
    "RoundId":1,
    "TeamId":524,
    "Name":"Tottenham Hotspur FC",
    "ShortName":"Tottenham",
    "Scope":"Total",
    "Order":2,
    "Games":38,
    "Wins":19,
    "Losses":6,
    "Draws":0,
    "GoalsScored":0,
    "GoalsAgainst":0,
    "GoalsDifferential":0,
    "Points":51,
    "Group":null,
    "GlobalTeamID":90000524
 },
 {
    "StandingId":7,
    "RoundId":1,
    "TeamId":527,
    "Name":"West Ham United FC",
    "ShortName":"West Ham",
    "Scope":"Total",
    "Order":6,
    "Games":38,
    "Wins":16,
    "Losses":8,
    "Draws":0,
    "GoalsScored":0,
    "GoalsAgainst":0,
    "GoalsDifferential":0,
    "Points":46,
    "Group":null,
    "GlobalTeamID":90000527
 },
 {
    "StandingId":10,
    "RoundId":1,
    "TeamId":511,
    "Name":"Chelsea FC",
    "ShortName":"Chelsea",
    "Scope":"Total",
    "Order":9,
    "Games":38,
    "Wins":12,
    "Losses":12,
    "Draws":0,
    "GoalsScored":0,
    "GoalsAgainst":0,
    "GoalsDifferential":0,
    "Points":38,
    "Group":null,
    "GlobalTeamID":90000511
 },
 {
    "StandingId":11,
    "RoundId":1,
    "TeamId":513,
    "Name":"Everton FC",
    "ShortName":"Everton",
    "Scope":"Total",
    "Order":11,
    "Games":38,
    "Wins":11,
    "Losses":13,
    "Draws":0,
    "GoalsScored":0,
    "GoalsAgainst":0,
    "GoalsDifferential":0,
    "Points":36,
    "Group":null,
    "GlobalTeamID":90000513
 },
 {
    "StandingId":14,
    "RoundId":1,
    "TeamId":526,
    "Name":"West Bromwich Albion FC",
    "ShortName":"West Brom",
    "Scope":"Total",
    "Order":14,
    "Games":38,
    "Wins":10,
    "Losses":15,
    "Draws":0,
    "GoalsScored":0,
    "GoalsAgainst":0,
    "GoalsDifferential":0,
    "Points":33,
    "Group":null,
    "GlobalTeamID":90000526
 },
 {
    "StandingId":24,
    "RoundId":1,
    "TeamId":516,
    "Name":"Manchester City FC",
    "ShortName":"Man City",
    "Scope":"Home",
    "Order":4,
    "Games":19,
    "Wins":12,
    "Losses":5,
    "Draws":0,
    "GoalsScored":0,
    "GoalsAgainst":0,
    "GoalsDifferential":0,
    "Points":26,
    "Group":null,
    "GlobalTeamID":90000516
 },
 {
    "StandingId":26,
    "RoundId":1,
    "TeamId":520,
    "Name":"Southampton FC",
    "ShortName":"Southampton",
    "Scope":"Home",
    "Order":6,
    "Games":19,
    "Wins":11,
    "Losses":5,
    "Draws":0,
    "GoalsScored":0,
    "GoalsAgainst":0,
    "GoalsDifferential":0,
    "Points":25,
    "Group":null,
    "GlobalTeamID":90000520
 },
 {
    "StandingId":29,
    "RoundId":1,
    "TeamId":523,
    "Name":"Swansea City AFC",
    "ShortName":"Swansea",
    "Scope":"Home",
    "Order":9,
    "Games":19,
    "Wins":8,
    "Losses":5,
    "Draws":0,
    "GoalsScored":0,
    "GoalsAgainst":0,
    "GoalsDifferential":0,
    "Points":22,
    "Group":null,
    "GlobalTeamID":90000523
 },
 {
    "StandingId":34,
    "RoundId":1,
    "TeamId":525,
    "Name":"Watford FC",
    "ShortName":"Watford",
    "Scope":"Home",
    "Order":14,
    "Games":19,
    "Wins":6,
    "Losses":7,
    "Draws":0,
    "GoalsScored":0,
    "GoalsAgainst":0,
    "GoalsDifferential":0,
    "Points":18,
    "Group":null,
    "GlobalTeamID":90000525
 },
 {
    "StandingId":38,
    "RoundId":1,
    "TeamId":512,
    "Name":"Crystal Palace FC",
    "ShortName":"Crystal Palace",
    "Scope":"Home",
    "Order":18,
    "Games":19,
    "Wins":6,
    "Losses":10,
    "Draws":0,
    "GoalsScored":0,
    "GoalsAgainst":0,
    "GoalsDifferential":0,
    "Points":15,
    "Group":null,
    "GlobalTeamID":90000512
 },
 {
    "StandingId":39,
    "RoundId":1,
    "TeamId":508,
    "Name":"AFC Bournemouth",
    "ShortName":"Bournemouth",
    "Scope":"Home",
    "Order":19,
    "Games":19,
    "Wins":5,
    "Losses":9,
    "Draws":0,
    "GoalsScored":0,
    "GoalsAgainst":0,
    "GoalsDifferential":0,
    "Points":15,
    "Group":null,
    "GlobalTeamID":90000508
 },
 {
    "StandingId":43,
    "RoundId":1,
    "TeamId":509,
    "Name":"Arsenal FC",
    "ShortName":"Arsenal",
    "Scope":"Away",
    "Order":3,
    "Games":19,
    "Wins":8,
    "Losses":4,
    "Draws":0,
    "GoalsScored":0,
    "GoalsAgainst":0,
    "GoalsDifferential":0,
    "Points":23,
    "Group":null,
    "GlobalTeamID":90000509
 },
 {
    "StandingId":46,
    "RoundId":1,
    "TeamId":515,
    "Name":"Liverpool FC",
    "ShortName":"Liverpool",
    "Scope":"Away",
    "Order":6,
    "Games":19,
    "Wins":8,
    "Losses":7,
    "Draws":0,
    "GoalsScored":0,
    "GoalsAgainst":0,
    "GoalsDifferential":0,
    "Points":20,
    "Group":null,
    "GlobalTeamID":90000515
 },
 {
    "StandingId":49,
    "RoundId":1,
    "TeamId":517,
    "Name":"Manchester United FC",
    "ShortName":"Man United",
    "Scope":"Away",
    "Order":10,
    "Games":19,
    "Wins":7,
    "Losses":8,
    "Draws":0,
    "GoalsScored":0,
    "GoalsAgainst":0,
    "GoalsDifferential":0,
    "Points":18,
    "Group":null,
    "GlobalTeamID":90000517
 },
 {
    "StandingId":51,
    "RoundId":1,
    "TeamId":521,
    "Name":"Stoke City FC",
    "ShortName":"Stoke",
    "Scope":"Away",
    "Order":11,
    "Games":19,
    "Wins":6,
    "Losses":8,
    "Draws":0,
    "GoalsScored":0,
    "GoalsAgainst":0,
    "GoalsDifferential":0,
    "Points":17,
    "Group":null,
    "GlobalTeamID":90000521
 },
 {
    "StandingId":57,
    "RoundId":1,
    "TeamId":522,
    "Name":"Sunderland AFC",
    "ShortName":"Sunderland",
    "Scope":"Away",
    "Order":17,
    "Games":19,
    "Wins":3,
    "Losses":10,
    "Draws":0,
    "GoalsScored":0,
    "GoalsAgainst":0,
    "GoalsDifferential":0,
    "Points":12,
    "Group":null,
    "GlobalTeamID":90000522
 },
 {
    "StandingId":58,
    "RoundId":1,
    "TeamId":519,
    "Name":"Norwich City FC",
    "ShortName":"Norwich",
    "Scope":"Away",
    "Order":18,
    "Games":19,
    "Wins":3,
    "Losses":14,
    "Draws":0,
    "GoalsScored":0,
    "GoalsAgainst":0,
    "GoalsDifferential":0,
    "Points":8,
    "Group":null,
    "GlobalTeamID":90000519
 },
 {
    "StandingId":59,
    "RoundId":1,
    "TeamId":518,
    "Name":"Newcastle United FC",
    "ShortName":"Newcastle",
    "Scope":"Away",
    "Order":19,
    "Games":19,
    "Wins":2,
    "Losses":14,
    "Draws":0,
    "GoalsScored":0,
    "GoalsAgainst":0,
    "GoalsDifferential":0,
    "Points":7,
    "Group":null,
    "GlobalTeamID":90000518
 },
 {
    "StandingId":60,
    "RoundId":1,
    "TeamId":510,
    "Name":"Aston Villa FC",
    "ShortName":"Aston Villa",
    "Scope":"Away",
    "Order":20,
    "Games":19,
    "Wins":1,
    "Losses":15,
    "Draws":0,
    "GoalsScored":0,
    "GoalsAgainst":0,
    "GoalsDifferential":0,
    "Points":5,
    "Group":null,
    "GlobalTeamID":90000510
 }
];

function addHomeAwayTeam(){

    let teams = JSON.parse(JSON.stringify(allTeams));

    let homeTeamName = document.querySelector("#homeTeamName").value;
    let homeTeamScore = parseInt(document.querySelector("#homeTeamScore").value);
    let homeTeamRecord = document.querySelector("#homeTeamRecord").value;
    let homeTeamPoints = parseInt(document.querySelector("#homeTeamPoints").value);
    let awayTeamName = document.querySelector("#awayTeamName").value;
    let awayTeamScore = parseInt(document.querySelector("#awayTeamScore").value);
    let awayTeamRecord = document.querySelector("#awayTeamRecord").value;
    let awayTeamPoints = parseInt(document.querySelector("#awayTeamPoints").value);
    let gameDate = document.querySelector("#gameDate").value;
    
    let comma = gameDate.indexOf(",");
    let date = gameDate.substring(comma + 2, gameDate.length)
    splitDate = date.split(" ", 2)
    console.log(splitDate)
    console.log(checkDate());

    function checkMonth(){
        let month = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"]
        let answer = true;
        for (i = 0; i < 12; i++){
            if (month[i] == gameDate.substring(0, comma)){
                return true;
            }else answer = false;
        }
        return answer;
    }

    function checkDate(){
        let month = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"]
        let day = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
        for (i = 0; i < 12; i++){
            if (month[i] == gameDate.substring(0, comma)){
                return day[i];
            }
        }
    }

    function checkTeamName(){
        let answer = true;
        for (i = 0; i < teams.length; i++){
            if (homeTeamName == teams[i].Name || homeTeamName == teams[i].ShortName){
                return true;
            }else if (awayTeamName == teams[i].Name || awayTeamName == teams[i].SHortName){
                return true;
            }else answer = false;
        }
        if (answer == false){
            return false;
        }
    }

    function changeTeamName(name){
        let answer = true;
        for (i = 0; i < teams.length; i++){
            if (name == teams[i].Name || name == teams[i].ShortName){
                name = teams[i].Name;
                return name;
            }else answer = false;
        }
        if (answer == false){
            return name;
        }
    }

    if(checkTeamName() == false || checkMonth() == false || 0 > splitDate[0] || splitDate[0] > checkDate() || splitDate[1] != 2021 || isNaN(splitDate[0]) || isNaN(splitDate[1]) || gameDate === ""  ||  gameDate.includes(",") == false || gameDate.includes(" ") == false || homeTeamName === "" || isNaN(homeTeamScore) || homeTeamRecord.includes("-") == false || isNaN(homeTeamPoints) || awayTeamName === "" || isNaN(awayTeamScore) || awayTeamRecord.includes("-") == false || isNaN(awayTeamPoints) || homeTeamScore < 0 || homeTeamScore > 9 || awayTeamScore < 0 || awayTeamScore > 9 || homeTeamPoints > 99 || homeTeamPoints < 0 || awayTeamPoints > 99 || awayTeamPoints < 0){
        document.querySelector("#errorMessage").innerHTML = "Please enter the correct parameters"
    }else {
        document.querySelector("#errorMessage").innerHTML = ""
    
        document.querySelector("#homeTeamName").value = "";
        document.querySelector("#homeTeamScore").value = "";
        document.querySelector("#homeTeamRecord").value = "";
        document.querySelector("#homeTeamPoints").value = "";

        document.querySelector("#gameDate").value = "";

        document.querySelector("#awayTeamName").value = "";
        document.querySelector("#awayTeamScore").value = "";
        document.querySelector("#awayTeamRecord").value = "";
        document.querySelector("#awayTeamPoints").value = "";
        
        let homeTeamRecordSplit = homeTeamRecord.split("-", homeTeamRecord.length);
        let awayTeamRecordSplit = awayTeamRecord.split("-", awayTeamRecord.length);

        let homeTeamWins = parseInt(homeTeamRecordSplit[0]);
        let homeTeamLosses = parseInt(homeTeamRecordSplit[1]);
        let homeTeamDraws = parseInt(homeTeamRecordSplit[2]);

        let awayTeamWins = parseInt(awayTeamRecordSplit[0]);
        let awayTeamLosses = parseInt(awayTeamRecordSplit[1]);
        let awayTeamDraws = parseInt(awayTeamRecordSplit[2]);

        if (homeTeamScore > awayTeamScore){
            homeTeamWins += 1; 
            awayTeamLosses += 1; 
        }else if (homeTeamScore < awayTeamScore){
            homeTeamLosses += 1;
            awayTeamWins += 1;
        }else if (homeTeamScore === awayTeamScore){
            homeTeamDraws += 1;
            awayTeamDraws += 1;
        }

        window.localStorage.setItem("homeTeamName", changeTeamName(homeTeamName));
        window.localStorage.setItem("homeTeamScore", homeTeamScore);
        window.localStorage.setItem("homeTeamWins", homeTeamWins);
        window.localStorage.setItem("homeTeamLosses", homeTeamLosses);
        window.localStorage.setItem("homeTeamDraws", homeTeamDraws);
        window.localStorage.setItem("homeTeamPoints", homeTeamPoints);

        window.localStorage.setItem("awayTeamName", changeTeamName(awayTeamName));
        window.localStorage.setItem("awayTeamScore", awayTeamScore);
        window.localStorage.setItem("awayTeamWins", awayTeamWins);
        window.localStorage.setItem("awayTeamLosses", awayTeamLosses);
        window.localStorage.setItem("awayTeamDraws", awayTeamDraws);
        window.localStorage.setItem("awayTeamPoints", awayTeamPoints);

        window.localStorage.setItem("gameDate", gameDate);
    }

}
